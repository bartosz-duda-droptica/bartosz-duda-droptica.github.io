"use strict";!function(s,e){function i(t,i){this.defaultSettings={stickyWrapperClass:"cta-sticky__sticky-wrapper",stickyHiddenClass:"sticky-hidden",ctaSelector:".cta",stickyBottomDistance:"5vh"},this.settings=s.extend(!0,this.defaultSettings,i||{}),this.$cta=t,this.$parent="",this.$anchor="",this.mobileParamsSet=!1,this.stickyBuilt=!1,this.sticky=!1,this.ctaFullHeight=0,this.ctaHeight=0,this.ctaWidth=0,this.ctaOffsetTop=0,this.anchorOffsetTop=0,this.init()}i.prototype.init=function(){this.$parent=this.$cta.parent(),this.setAnchor(),e.utility.isMobile()&&(this.setMobileParams(),this.appendStickyElements(),this.setElementsOffsetTop(),this.toggleSticky(),this.toggleVisibility()),this.bindScrollEvent(),this.bindResizeEvent()},i.prototype.getCurrentViewportParams=function(t){var i=(t=void 0===t?s(window):t).scrollTop(),t=t.height();return{top:i,bottom:i+t,height:t}},i.prototype.setAnchor=function(){var t=this.$cta.data("sticky-anchor").replace(window.location.pathname,"");void 0!==t&&""!==t&&(this.$anchor=s('[data-anchor="'+t+'"]'))},i.prototype.setMobileParams=function(){this.setCtaHeight(),this.setCtaFullHeight(),this.setCtaWidth(),this.mobileParamsSet=!0},i.prototype.setCtaHeight=function(){this.ctaHeight=this.$cta.outerHeight()},i.prototype.setCtaWidth=function(){this.ctaWidth=this.$cta.outerWidth()},i.prototype.setCtaFullHeight=function(){this.ctaFullHeight=this.$cta.outerHeight(),this.ctaFullHeight+=parseInt(this.$cta.css("margin-top")),this.ctaFullHeight+=parseInt(this.$cta.css("margin-bottom"))},i.prototype.setElementsOffsetTop=function(){this.setCtaOffsetTop(),this.setAnchorOffsetTop()},i.prototype.setCtaOffsetTop=function(){this.ctaOffsetTop=this.$cta.offset().top},i.prototype.setAnchorOffsetTop=function(){this.$anchor instanceof jQuery&&(this.anchorOffsetTop=this.$anchor.offset().top)},i.prototype.updateStickyCtaWidth=function(){this.$stickyWrapper.find(this.settings.ctaSelector).css("width",this.ctaWidth+"px")},i.prototype.appendStickyElements=function(){var t=s("."+this.settings.stickyWrapperClass);0<t.length?this.$stickyWrapper=t:(this.$stickyWrapper=s("<div>",{class:this.settings.stickyWrapperClass}).appendTo("body"),this.hideSticky(),this.$cta.clone().css("width",this.ctaWidth+"px").appendTo(this.$stickyWrapper),e.attachBehaviors(this.$stickyWrapper)),this.stickyBuilt=!0},i.prototype.showSticky=function(){this.$stickyWrapper.css("bottom",this.settings.stickyBottomDistance),this.sticky=!0},i.prototype.hideSticky=function(){this.$stickyWrapper.css("bottom","-"+this.ctaHeight+"px"),this.sticky=!1},i.prototype.toggleSticky=function(t){(t=void 0===t?this.getCurrentViewportParams():t).bottom>this.ctaOffsetTop+this.ctaFullHeight+t.height?this.showSticky():this.sticky&&this.hideSticky()},i.prototype.toggleVisibility=function(t){void 0===t&&(t=this.getCurrentViewportParams()),this.$anchor instanceof jQuery&&(t.bottom>this.anchorOffsetTop?this.$stickyWrapper.addClass(this.settings.stickyHiddenClass):this.$stickyWrapper.removeClass(this.settings.stickyHiddenClass))},i.prototype.bindScrollEvent=function(){var i=this;s(window).scroll(function(){var t;e.utility.isMobile()&&(t=i.getCurrentViewportParams(s(this)),i.toggleSticky(t),i.toggleVisibility(t))})},i.prototype.bindResizeEvent=function(){var t=this;s(window).resize(function(){e.utility.isMobile()&&setTimeout(function(){t.mobileParamsSet||t.setMobileParams(),t.stickyBuilt||t.appendStickyElements(),t.updateStickyCtaWidth(),t.setElementsOffsetTop(),t.toggleSticky(),t.toggleVisibility()},500)})},s.fn.hereCtaSticky=i.jQueryInterface=function(t){return this.each(function(){new i(s(this),t)})},e.behaviors.ctaSticky={attach:function(t){s(window).on("load",function(){s(".cta.cta--sticky",t).once("cta_sticky").hereCtaSticky()})}}}(jQuery,Drupal);