"use strict";!function(e,s){function a(t,i){this.defaultSettings={animation:{gradient:{heightRatio:{start:.5,end:.2},lengthRatio:{start:1,end:1.7}},offset:{heightRatio:{start:1,end:.2},top:{start:-10,end:10}}},gradientDivSelector:".background-gradient",mobileBreakpoint:s.utility.breakpoints.medium},this.settings=e.extend(!0,this.defaultSettings,i||{}),this.$wrapper=t,this.$gradientDiv=t.find(this.settings.gradientDivSelector).eq(0),this.distanceFromBottom=0,this.viewportDimensions=s.utility.getViewportDimensions(),this.bindResizeEvent(),this.bindScrollEvent()}a.prototype.setRadialGradientLength=function(t){var i=(i=this.$gradientDiv.css("background-image")).replace(/(\d+px )?(?:circle )?at/,t?t+"px circle at":"circle at");this.$gradientDiv.css({background:i,"background-image":i})},a.prototype.calculateDistanceFromBottom=function(){var t=this.$wrapper[0].getBoundingClientRect().top;this.distanceFromBottom=this.viewportDimensions.height-t},a.prototype.animate=function(t){this.calculateDistanceFromBottom(),this.animateOffset(),this.animateGradient(t)},a.prototype.animateOffset=function(){var t=this.getAnimationProperties("offset"),i=this.settings.animation.offset.top.end-this.settings.animation.offset.top.start,t=this.settings.animation.offset.top.start+i*t.ratio;s.utility.isMobile()||(t=a.boundValue(t,this.settings.animation.offset.top.start,this.settings.animation.offset.top.end),this.$gradientDiv.css({top:t+"px"}))},a.prototype.animateGradient=function(t){t=t||!1;var i=this.getAnimationProperties("gradient"),e=this.$gradientDiv.outerWidth(),n=this.settings.animation.gradient.lengthRatio.start*e,o=this.settings.animation.gradient.lengthRatio.end*e,e=parseInt(n+i.ratio*(o-n)),i=s.utility.isMobile();(!t||i)&&i||(o=a.boundValue(e,n,o),this.setRadialGradientLength(parseInt(o)))},a.prototype.getAnimationProperties=function(t){var i=this.viewportDimensions.height*this.settings.animation[t].heightRatio.start,e=this.viewportDimensions.height*this.settings.animation[t].heightRatio.end,n=this.viewportDimensions.height-i,o=i-e,t=(this.distanceFromBottom-n)/o;return{height:{start:i,end:e,animation:o},offset:n,ratio:0<=t?t:0}},a.prototype.resetOffset=function(){this.$gradientDiv.css({top:this.settings.animation.offset.top.end+"px"})},a.prototype.handleScroll=function(t){this.animate(t)},a.prototype.handleResize=function(){this.updateViewportDimensions(),s.utility.isMobile()&&this.resetOffset(),this.handleScroll(!0)},a.prototype.updateViewportDimensions=function(){this.viewportDimensions=s.utility.getViewportDimensions()},a.prototype.bindResizeEvent=function(){var t=this;e(window).resize(function(){t.handleResize()}),this.handleResize()},a.prototype.bindScrollEvent=function(){var t=this;e(window).scroll(function(){t.animate()})},a.boundValue=function(t,i,e){return t<i?i:e<t?e:t},e.fn.gradientOffsetAnimation=a.jQueryInterface=function(t){return this.each(function(){new a(e(this),t)})},s.behaviors.gradientOffsetAnimation={attach:function(t){e(".background-gradient-wrapper",t).once("gradient-offset-animation").gradientOffsetAnimation()}}}(jQuery,Drupal);