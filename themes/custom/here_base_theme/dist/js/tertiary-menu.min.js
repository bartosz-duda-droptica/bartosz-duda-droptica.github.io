"use strict";!function(r,i){var o=0;function n(s){this.stickyClass="tertiary-menu--sticky",this.$tertiaryMenu={},this.$tertiaryMenuHeading={},this.$tertiaryMenuNav={},this.$tertiaryMenuStickyPlaceholder={},this.$tertiaryMenuOverlay={},this.initialValues=null,this.init=function(){this.$tertiaryMenu=s,this.$tertiaryMenuHeading=r(".tertiary-menu__heading",s),this.$tertiaryMenuNav=r(".tertiary-menu__navigation",s),this.$tertiaryMenuStickyPlaceholder=s.prev(".tertiary-menu__sticky-placeholder"),this.$tertiaryMenuOverlay=s.next(".tertiary-menu__overlay"),this.$tertiaryMenuNav.hide(),this.toggleSticky(!0)},this.resetInitValues=function(){this.initialValues=null},this.getInitialValues=function(t){if(this.initialValues)return this.initialValues;var e=r(window).width(),e={is_desktop:1024<=e,one_column:e<440,menu_initial_top_offset:this.$tertiaryMenuStickyPlaceholder.offset().top,menu_height:this.$tertiaryMenu.outerHeight(),menu_nav_height:this.$tertiaryMenuNav.outerHeight()};return t?(this.initialValues=e,this.initialValues):e},this.isSticky=function(){return this.$tertiaryMenu.hasClass(this.stickyClass)},this.getCurrentTopOffset=function(){if(this.isSticky())return this.$tertiaryMenu.position().top;var t=this.$tertiaryMenu.offset();return t.top||0},this.getStickyPaddings=function(){var t=0,e=r("body.toolbar-fixed");0<e.length&&(t=parseInt(e.css("padding-top")));var i=0,e=r(".layout-container");return{body_padding_top:t,layout_padding_top:i=0<e.length?parseInt(e.css("padding-top")):i,sticky_menu_top_position:t+i}},this.toggleNavigation=function(){this.$tertiaryMenuNav.hasClass("open")?this.closeNavigation():this.openNavigation()},this.openNavigation=function(){var t=this,e=r("li",t.$tertiaryMenuNav),i=this.getInitialValues(!0);t.$tertiaryMenu.addClass("active"),t.$tertiaryMenuHeading.addClass("active"),t.$tertiaryMenuOverlay.addClass("visible").addClass("active"),e.each(function(t,e){r(e).css({"max-height":i.one_column?"":"40px",opacity:0,top:i.one_column?"-"+(2*t+30)+"px":""})});var n=window.innerHeight-this.getCurrentTopOffset()-i.menu_height+1,a=i.menu_nav_height>n?n:i.menu_nav_height,n=i.is_desktop?300:200;t.$tertiaryMenuNav.css("height",0).show().animate({height:a},n,"easeOutQuad",function(){r(this).addClass("open"),i.one_column?e.each(function(t,e){setTimeout(function(){r(e).animate({opacity:1,top:0},200)},40*t)}):(r("ul",t.$tertiaryMenuNav).css("top","-20px").animate({top:0},400),e.animate({"max-height":"50px",opacity:1},400)),r(document).trigger("HereTertiaryMenu:opened")})},this.closeNavigation=function(){var t,e,i,n,a=this;a.$tertiaryMenuHeading&&a.$tertiaryMenuHeading.hasClass("active")&&(t=r("ul",a.$tertiaryMenuNav),e=r("li",t),i=this.getInitialValues(!0),n=200,a.$tertiaryMenuHeading.removeClass("active"),a.$tertiaryMenuOverlay.removeClass("active"),i.one_column?(e.each(function(t,e){setTimeout(function(){r(e).animate({opacity:0,top:"-"+30*(t+1)+"px"},200)},50*t)}),n=400):(t.animate({top:"-20px"},400),e.animate({"max-height":"40px",opacity:0},400)),setTimeout(function(){a.$tertiaryMenuNav.animate({height:0},300,"easeOutQuad",function(){r(this).removeClass("open").hide().css("height","auto"),t.removeAttr("style"),e.removeAttr("style"),a.$tertiaryMenu.removeClass("active"),a.$tertiaryMenuOverlay.removeClass("visible"),r(document).trigger("HereTertiaryMenu:closed")}).scrollTop(0)},n))},this.toggleSticky=function(t){var e=r(window),i=e.width(),n=e.scrollTop(),a=this.getInitialValues(!t),e=this.getStickyPaddings(),t=a.menu_initial_top_offset;(i<1024&&"up"===(n<o?"up":"down")||1024<=i)&&(t-=e.sticky_menu_top_position),t<=n?(s.hasClass(this.stickyClass)||(s.addClass(this.stickyClass),this.$tertiaryMenuStickyPlaceholder.css("height",a.menu_height+"px")),1024<=i?s.css({top:e.sticky_menu_top_position,transform:""}):n<o||0===o?s.css("transform","translateY("+e.sticky_menu_top_position+"px)"):o<n&&s.css("transform",""),o=n):(this.$tertiaryMenuStickyPlaceholder.removeAttr("style"),s.removeClass(this.stickyClass),s.css({top:0,transform:""}))}}i.hereTertiaryMenu={menus:[],initiated:!1,window:{width:r(window).width()},setMenuIndex:function(t,e){return t.data("tertiary-menu-index",e)},getMenuIndex:function(t){return t.data("tertiary-menu-index")},closeMenus:function(){if(this.initiated)for(var t in this.menus)t.closeNavigation()},resetMenusInitialValues:function(){if(this.initiated)for(var t in this.menus)t.resetInitValues()},toggleStickyOnMenus:function(t){if(this.initiated)for(var e in this.menus)t&&e.resetInitValues(),e.toggleSticky(!1)},resetOnResize:function(){var t=this,e=r(window).width();e!==t.window.width&&(t.window.width=e,t.toggleStickyOnMenus(!0),r(document).on("HereTertiaryMenu:closed",function(){t.resetMenusInitialValues(),r(this).off("HereTertiaryMenu:closed")}))}},i.behaviors.tertiaryMenu={attach:function(t){var e=r(".tertiary-menu",t);0<e.length&&(e.once("tertiaryMenu").each(function(t){var e=r(this);i.hereTertiaryMenu.setMenuIndex(e,t),i.hereTertiaryMenu.menus[t]=new n(e)}),e.hasClass("interactive-heading")&&(e.find(".tertiary-menu__toggle").once("tertiaryMenuToggle").click(function(t){t.preventDefault();t=i.hereTertiaryMenu.getMenuIndex(e);i.hereTertiaryMenu.menus[t].toggleNavigation()}),r(document).on("click touchstart",function(t){!r(t.target).closest(e).length&&e.is(":visible")&&i.hereTertiaryMenu.closeMenus()}),r(window).resize(function(){i.hereTertiaryMenu.closeMenus()}),r(window).scroll(function(){i.hereTertiaryMenu.closeMenus()})),r(window).scroll(function(){i.hereTertiaryMenu.toggleStickyOnMenus(!1)}),r(window).resize(function(){e.css("top",""),setTimeout(function(){i.hereTertiaryMenu.resetOnResize()},200)}))}},r(document).ready(function(){for(var t in this.Drupal.hereTertiaryMenu.menus)t.init();i.hereTertiaryMenu.initiated=!0})}(jQuery,Drupal);